<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Nightlife Party agenda</title>
</head>
<body class="front">

    <div class="container front-container screen-container">
        <div class="col-xs-12">
            <div class="banner" <div class="banner" style="padding-top: 18px; width: 100%; background: url('img/party-banner.jpg'); background-size: cover;">>
                <img id="app-logo" alt="Nightlife party agenda" src="img/logo-app.png">
            </div>
            <div class="content screen-slider">

              <div class="item-top-container"></div>

            </div>
            <footer>
                <p>Powered by:</p>
                <a href="#" >
                    <img class="front-logo" src="img/logo.png">
                </a>
            </footer>
        </div>
    </div>

    <style type="text/css">
        .datepicker{
            -webkit-appearance: none;
           -moz-appearance:    none;
           appearance:         none;
            width: 100%;
        }
        /*body canvas{
          display: none;
        }*/
    </style>
    
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        $( "#search-btn" ).click(function() {
            if(!$("#search-date").val() && !$("#search-title").val()){
                return false;
            }
        });

        

        var QueryString = function () {
          // This function is anonymous, is executed immediately and 
          // the return value is assigned to QueryString!
          var query_string = {};
          var query = window.location.search.substring(1);
          var vars = query.split("&");
          for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
                // If first entry with this name
            if (typeof query_string[pair[0]] === "undefined") {
              query_string[pair[0]] = decodeURIComponent(pair[1]);
                // If second entry with this name
            } else if (typeof query_string[pair[0]] === "string") {
              var arr = [ query_string[pair[0]],decodeURIComponent(pair[1]) ];
              query_string[pair[0]] = arr;
                // If third or later entry with this name
            } else {
              query_string[pair[0]].push(decodeURIComponent(pair[1]));
            }
          } 
            return query_string;
        }();

        jQuery( document ).ready( function( $ ) {
            if(QueryString.date == ""){
                QueryString.date = 0;
                date = "";
            }else{
                date = QueryString.date.split("-")
                date = date[2] + "-" + date[1] + "-" + date[0];
            }
            if(QueryString.title == ""){
                QueryString.title = 0;
                title = "";
            }else{
                title = QueryString.title;
            }
            $.ajax({
                  url: 'http://nightlifepartyagenda.nl/e983upktxkea/search/'+QueryString.date+'/'+QueryString.title,
                  type: 'GET',
                  dataType: "JSON",
                  success: function (data) {
                        
                    if( !$.isArray(data) ||  !data.length ) {
                        
                        $(".item-top-container").append("<div class='col-xs-12 mob-no-pad'><div class='col-xs-12 mob-no-pad'><div class='col-xs-12 m-t-h'><p><a href='index.html'>Terug naar overzicht</a></p><p>Zoeken op: "+date+" "+title+"</p></div></div></div><div class='col-xs-12'><div class='col-xs-12'><div class='col-xs-12'><p>Er zijn geen events gevonden.</p></div></div></div>");

                        

                    } else {

                    $(".item-top-container").append("<div class='col-xs-12 mob-no-pad'><div class='col-xs-12 mob-no-pad'><div class='col-xs-12 m-t-h'><p><a href='index.html'>Terug naar overzicht</a></p><p>Zoeken op: "+date+" "+title+"</p></div></div></div><div class='col-xs-12'><div class='col-xs-12'></div></div>");

                      $.each( data, function( key, val ) {
                        $(".item-top-container").append("<div class='row base-row row-"+val.id+"'><div class='col-xs-12'><div class='datetime'><p class='date'>"+val.date+"</p></div></div><div class='col-xs-3'><img class='event-image' id='event-"+val.id+"' alt='"+val.name+"' src='http://nightlifepartyagenda.nl/images/events/"+val.image+"'></div><div class='col-xs-9 no-p-l'><p class='title'>"+val.name+"</p><p class='subtitle'>"+val.subtitle+"</p><div class='line-up' id='colorlineup-"+val.id+"'><strong>Line up:</strong><br/>"+val.line_up+"</div><a class='read-more' style='display:none;' href='#'>Lees meer</a><p class='location' id='colorlocation-"+val.id+"'><strong>Location: </strong><span>"+val.location+"</span></p><div class='links pull-right' id='link-container-"+val.id+"'></div></div></div>");

                        if(val.link !== null  && val.link !== ""){
                          $("#link-container-"+val.id).append("<a class='link-btn' target='_BLANK' onclick='window.open('"+val.link+"', '_system');' href='#'>Website</a>");
                        }
                        if(val.ticket !== null  && val.ticket !== ""){
                          $("#link-container-"+val.id).append("<a class='link-btn m-l-h' target='_BLANK' onclick='window.open('"+val.link+"', '_system');' href='#'>Tickets</a>");
                        }
                      });
                    }
                  }
              });
        } );
</script>


    
</body>
</html>
